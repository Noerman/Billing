<?phpnamespace App\ClientBundle\Business\Project;use App\ClientBundle\Business\Base\BaseGridHandler;class AttachmentGridHandler extends BaseGridHandler{    function buildBaseQuery($query, $baseObject = 'p', $filter)    {        $idProject = $this->container->get('request')->query->get('id', 0);        $query->select($baseObject)            ->from('AppClientBundle:ClientProjectAttachment', $baseObject)            ->andWhere($baseObject . '.idProject = :idProject')            ->setParameter('idProject', $idProject);        // Build filter here - Consult arrayToSQL($filter, false)        $this->container->get('app_admin.helper.kendo_grid')->filter($query, $baseObject, $filter);    }    public function postParseRow(&$r)    {        $r['timestamp'] = $this->helperFormatter->format($r['timestamp'], 'datetime');        $url = $this->container->getParameter('project_upload_url');        $attachments = $this->container->get('app_admin.helper.doctrine')->loadList('AppClientBundle:ClientProjectAttachmentFile', 'idProjectAttachment', 'file', $r['id']);        $r['attachments'] = array();        foreach ($attachments as $file) {            list($t, $fileName) = explode('/', $file);            $r['attachments'][] = '<a target="_blank" href="' . $url . '/' . $file . '">' . $fileName . '</a>';        }        $r['attachments'] = implode('&nbsp;&nbsp;', $r['attachments']);    }}