<?phpnamespace App\AdminBundle\Business\Product;use App\AdminBundle\Business\Base\BaseGridHandler;class GridHandler extends BaseGridHandler{    function buildBaseQuery($query, $baseObject = 'p', $filter)    {        $query->select($baseObject)            ->from('AppClientBundle:Product', $baseObject);        // Build filter here - Consult arrayToSQL($filter, false)        $this->container->get('app_admin.helper.kendo_grid')->filter($query, $baseObject, $filter);    }    public function postParseRow(&$r)    {        $r['idProductGroup'] = $this->helperFormatter->format($r['idProductGroup'], 'mapping', 'product_group_list');        $r['idEmail'] = $this->helperFormatter->format($r['idEmail'], 'mapping', 'email_list');        $r['idPaymentType'] = $this->helperFormatter->format($r['idPaymentType'], 'mapping', 'product_payment_type');        $r['orderLink'] = $this->container->get('router')->generate('web_client_order') . '?pid=' . $r['id'];        $r['income'] = 0;        $invoices = $this->container->get('doctrine')->getRepository('AppClientBundle:ClientInvoice')->findBy(['idProduct' => $r['id']]);        foreach($invoices as $invoice) $r['income'] += $invoice->getTotalAmount();        $r['income'] = $this->helperFormatter->format($r['income'], 'money');    }}