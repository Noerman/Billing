<?phpnamespace App\AdminBundle\Business\EstimatePurchase;use App\AdminBundle\Business\Base\BaseGridHandler;class GridHandler extends BaseGridHandler{    function buildBaseQuery($query, $baseObject = 'p', $filter)    {        $query->select($baseObject)            ->from('AppClientBundle:ClientEstimatePurchase', $baseObject);        // Build filter here - Consult arrayToSQL($filter, false)        $this->container->get('app_admin.helper.kendo_grid')->filter($query, $baseObject, $filter);    }    public function postParseRow(&$r)    {        $url = $this->container->get('router')->generate('app_admin_estimate_purchase_download');        $attachments = $this->container->get('app_admin.helper.doctrine')->loadList('AppClientBundle:ClientEstimatePurchaseFile', 'idEstimatePurchase', 'id', $r['id']);        $r['attachments'] = array();        foreach ($attachments as $file) {            $r['attachments'][] = '<a target="_blank" href="' . $url . '?id=' . $file . '">' . $file . '</a>';        }        $r['attachments'] = implode('&nbsp;&nbsp;', $r['attachments']);        $r['purchaseDate'] = $this->helperFormatter->format($r['purchaseDate'], 'date');        $r['idEstimate'] = $this->helperFormatter->format($r['idEstimate'], 'mapping', 'estimate_list');    }}