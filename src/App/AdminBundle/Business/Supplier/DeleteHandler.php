<?phpnamespace App\AdminBundle\Business\Supplier;use App\AdminBundle\Business\Base\BaseDeleteHandler;use App\ClientBundle\Entity;class DeleteHandler extends BaseDeleteHandler{    public function execute()    {        $model = $this->getModel();        // Cascade through supplier purchases        $em = $this->container->get('doctrine')->getEntityManager();        $purchases = $em->getRepository('AppClientBundle:SupplierPurchase')->findByIdSupplier($model['id']);        foreach($purchases as $purchase)        {            $files = $em->getRepository('AppClientBundle:SupplierPurchaseFile')->findByIdPurchase($purchase->getId());            foreach($files as $file)            {                unlink($this->container->getParameter('supplier_upload_dir') . '/' . $file->getFile());                $em->remove($file);            }            $em->remove($purchase);        }        $em->flush();        // Delete the supplier        $this->helperDoctrine->deleteOneById('AppClientBundle:Supplier', $model['id']);    }}