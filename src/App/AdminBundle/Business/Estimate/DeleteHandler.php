<?phpnamespace App\AdminBundle\Business\Estimate;use App\AdminBundle\Business\Base\BaseDeleteHandler;use App\ClientBundle\Entity;class DeleteHandler extends BaseDeleteHandler{    public function execute()    {        $model = $this->getModel();        // Cascade through estimate items        $em = $this->container->get('doctrine')->getEntityManager();        $items = $em->getRepository('AppClientBundle:ClientEstimateItem')->findByIdEstimate($model['id']);        foreach($items as $item) $em->remove($item);        $em->flush();        // Delete the estimate        $this->helperDoctrine->deleteOneById('AppClientBundle:ClientEstimate', $model['id']);    }}