<?phpnamespace App\AdminBundle\Business\Config;use App\AdminBundle\Business\Base\BaseEditHandler;use App\ClientBundle\Entity;class EditGatewayHandler extends BaseEditHandler{    public function loadEntity()    {        $config = $this->container->get('doctrine')->getRepository('AppClientBundle:Gateway')->findAll();        foreach ($config as $c) {            return $c;        }    }    public function getModelFromEntity($entity)    {        return $this->helperCommon->copyEntityToArray($entity);    }    public function buildForm($builder)    {        // paypal        $builder->add('paypalEnabled', 'choice', array(            'label'       => 'Enabled',            'attr'        => array(                'description' => 'If you would like to enable Paypal payment, please check this box.'            ),            'empty_value' => false,            'choices'     => $this->helperMapping->getMapping('config_bit_value'),            'required'    => false        ));        $builder->add('paypalEmail', 'text', array(            'label'    => 'Paypal Email Address',            'attr'     => array(                'description' => 'Your PayPal email address, to which payment will be directed.'            ),            'required' => false        ));        $builder->add('idPaypalAccount', 'choice', array(            'label'    => 'Paypal account',            'attr'     => array(                'description' => 'Paypal account'            ),            'choices'  => $this->helperMapping->getMapping('account_list'),            'required' => false        ));        // bank        $builder->add('bankEnabled', 'choice', array(            'label'       => 'Enabled',            'attr'        => array(                'description' => 'If you would like to enable bank transfers, please check this box.'            ),            'empty_value' => false,            'choices'     => $this->helperMapping->getMapping('config_bit_value'),            'required'    => false        ));        $builder->add('bankTransferInstruction', 'textarea', array(            'label'    => 'Bank Transfer Instruction',            'attr'     => array(                'description' => 'Bank Transfer Instruction'            ),            'required' => false        ));        $builder->add('idBankAccount', 'choice', array(            'label'    => 'Bank account',            'attr'     => array(                'description' => 'Bank account'            ),            'choices'  => $this->helperMapping->getMapping('account_list'),            'required' => false        ));    }    public function onSuccess()    {        $model = $this->getForm()->getData();        $entity = $this->getEntity();        foreach ($model as $k => $v) {            $setMethod = 'set' . ucfirst($k);            if (method_exists($entity, $setMethod)) {                $entity->$setMethod($v);            }        }        parent::onSuccess();    }}