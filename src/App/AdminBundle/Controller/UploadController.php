<?phpnamespace App\AdminBundle\Controller;use Symfony\Component\HttpFoundation\Response;use App\AdminBundle\Business;use App\ClientBundle\Entity;use Symfony\Component\Security\Core\SecurityContext;class UploadController extends BaseController{    public function saveAction()    {        $uploadFile = $this->get('request')->files->get('upload', false);        if ($uploadFile == false) {            return new Response(json_encode(array(                'status'  => 'Failed',                'message' => 'Error'            )));        }        // Generate file name        $container = $this->get('service_container');        $mainDirectory = $container->getParameter('temp_upload_dir');        $ext = pathinfo($uploadFile->getClientOriginalName(), PATHINFO_EXTENSION);        if (empty($ext)) {            $ext = 'tmp';        }        $ext = strtolower($ext);        if (!in_array($ext, array('csv'))) {            return new Response(json_encode(array(                'status'  => 'Failed',                'message' => 'Extension should be CSV'            )));        }        $randString = $container->get('app_admin.helper.common')->generateRandString(16);        $fileName = $mainDirectory . '/' . $randString . '.' . $ext;        while (file_exists($fileName)) {            $randString = $container->get('app_admin.helper.common')->generateRandString(16);            $fileName = $mainDirectory . '/' . $randString . '.' . $ext;        }        // Save upload file        $uploadFile->move($mainDirectory, $randString . '.' . $ext);        $json = json_encode(array(            'status'   => 'OK',            'fileName' => $randString . '.' . $ext        ));        return new Response($json);    }    public function removeAction()    {        return new Response("");    }}